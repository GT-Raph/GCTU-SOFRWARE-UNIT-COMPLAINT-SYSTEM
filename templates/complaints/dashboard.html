{% extends 'bases.html' %} 

{% block content %}
<h1 class="text-center mb-5">Dashboard</h1>

<canvas id="complaintsChart" width="400" height="200"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // JavaScript code for creating the chart
  document.addEventListener('DOMContentLoaded', function () {
      var ctx = document.getElementById('complaintsChart').getContext('2d');
      var complaintsChart = new Chart(ctx, {
          type: 'bar',
          data: {
              labels: ['Total Complaints', 'Solved Complaints', 'Unresolved Complaints', 'Complaints Today'],
              datasets: [{
                  label: 'Number of Complaints',
                  data: [{{ total_complaints }}, {{ solved_complaints }}, {{ unresolved_complaints }}, {{ complaints_per_day }}],
                  backgroundColor: [
                      'rgba(255, 99, 132, 0.2)',
                      'rgba(75, 192, 192, 0.2)',
                      'rgba(255, 205, 86, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                  ],
                  borderColor: [
                      'rgba(255, 99, 132, 1)',
                      'rgba(75, 192, 192, 1)',
                      'rgba(255, 205, 86, 1)',
                      'rgba(54, 162, 235, 1)',
                  ],
                  borderWidth: 1
              }]
          },
          options: {
              scales: {
                  y: {
                      beginAtZero: true
                  }
              }
          }
      });
  });
</script>

<a href="{% url 'complaint_list' %}" class="btn btn-info btn-lg"
  >View Complaints</a
>
<a href="{% url 'file_complaint' %}" class="btn btn-primary btn-lg"
  >File a Complaint</a
>
{% endblock %}
